<section>
  <app-custom-search (searchQuery)="onSearch($event)"></app-custom-search>
  <app-filter-control
    [(filterQuery)]="filterQuery"
    [filterOptions]="filterOptions"
    [itemsCountLabel]="handleCountTodos()"
    [isSearchBoxVisible]="false"
    (isAscOutput)="onSort()"
  ></app-filter-control>

  <!-- todos list -->
  @if(todos().length) {

  <div class="mt-8">
    <div class="flex">
      <button
        mat-button
        (click)="accordion().openAll()"
        [disabled]="!todosSignal().length"
      >
        Expand All
      </button>
      <button
        mat-button
        (click)="accordion().closeAll()"
        [disabled]="!todosSignal().length"
      >
        Collapse All
      </button>
      <button mat-button class="ml-auto" (click)="addNewTodo()">
        Create new todo
      </button>
    </div>
    <mat-accordion multi>
      @for (todo of todosSignal(); track todo.id) {
      <app-todo
        [todo]="todo"
        (complete)="updateTodo($event)"
        (delete)="deleteTodo($event)"
      ></app-todo>
      } @empty {
      <app-nothing-found
        message="No item is matching with your filter option..."
      />
      }
    </mat-accordion>
  </div>

  } @else {
  <app-nothing-found />
  }
</section>
